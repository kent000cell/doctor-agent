# AI Doctor Agent

> Agent Skills ê¸°ë°˜ ì˜ë£Œ AI ìƒë‹´ ì—ì´ì „íŠ¸ - í”„ë¡œë•ì…˜ê¸‰ í”„ë¡œí† íƒ€ì…

[![Python](https://img.shields.io/badge/Python-3.10+-blue.svg)](https://www.python.org/)
[![FastAPI](https://img.shields.io/badge/FastAPI-0.100+-green.svg)](https://fastapi.tiangolo.com/)
[![OpenAI](https://img.shields.io/badge/OpenAI-GPT--4o-orange.svg)](https://openai.com/)
[![License](https://img.shields.io/badge/License-Apache%202.0-blue.svg)](LICENSE)

## ê°œìš”

AI Doctor AgentëŠ” **Agent Skills ìŠ¤í™**ì„ ì¤€ìˆ˜í•˜ì—¬ êµ¬í˜„ëœ ì˜ë£Œ AI ìƒë‹´ ì‹œìŠ¤í…œì…ë‹ˆë‹¤. í™˜ìì˜ ì¦ìƒì„ ë¶„ì„í•˜ê³ , ì˜ë£Œ ì˜ìƒì„ í•´ì„í•˜ë©°, ì ì ˆí•œ ì¹˜ë£Œë²•ì„ ì¶”ì²œí•˜ëŠ” AI ì—ì´ì „íŠ¸ì…ë‹ˆë‹¤.

**ì£¼ìš” íŠ¹ì§•:**
- ğŸ¥ **ë©€í‹°ëª¨ë‹¬ ì§„ë‹¨**: í…ìŠ¤íŠ¸ ì¦ìƒ + ì´ë¯¸ì§€ ë¶„ì„ (GPT-4o Vision)
- ğŸ”§ **Agent Skills ìŠ¤í™ ì¤€ìˆ˜**: Progressive Disclosure íŒ¨í„´ êµ¬í˜„
- âš¡ **ì‹¤ì‹œê°„ ìŠ¤íŠ¸ë¦¬ë°**: SSEë¥¼ í†µí•œ ì§„ë‹¨ ê³¼ì • ì‹¤ì‹œê°„ í‘œì‹œ
- ğŸ› ï¸ **10ê°œ ì˜ë£Œ ë„êµ¬**: Function Calling ê¸°ë°˜ ì²´ê³„ì  ì§„ë‹¨
- ğŸ“š **4ê°œ ì „ë¬¸ ìŠ¤í‚¬**: ì¦ìƒë¶„ì„, ì˜ìƒë¶„ì„, ì§ˆë³‘í‰ê°€, ì¹˜ë£Œì¶”ì²œ

âš ï¸ **ì£¼ì˜**: ë³¸ ì‹œìŠ¤í…œì€ AI ë³´ì¡° ì§„ë‹¨ ë°ëª¨ë¡œ, ì‹¤ì œ ì˜ë£Œ ì§„ë‹¨ì„ ëŒ€ì²´í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

---

## ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       Frontend (Web UI)                     â”‚
â”‚                  Vanilla JS + SSE Streaming                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚ HTTP/SSE
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Backend (FastAPI)                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚   Routes    â”‚  â”‚ Skill Loader â”‚  â”‚ Tool Registryâ”‚      â”‚
â”‚  â”‚  /api/chat  â”‚â”€â–¶â”‚  Discovery   â”‚â”€â–¶â”‚  10 Tools    â”‚      â”‚
â”‚  â”‚ /api/skills â”‚  â”‚  Activation  â”‚  â”‚  Execution   â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚ OpenAI API
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    OpenAI GPT-4o                            â”‚
â”‚              Function Calling + Vision                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Agent Skills (4ê°œ)                        â”‚
â”‚  symptom-analysis â”‚ imaging-analysis â”‚ disease-assessment  â”‚
â”‚                   treatment-recommendation                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Agent Skills ë™ì‘ íë¦„

```
1. Discovery Phase
   â””â”€ ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ì— ìŠ¤í‚¬ ë©”íƒ€ë°ì´í„° XML ì£¼ì…

2. Activation Phase
   â””â”€ LLMì´ read_skill ë„êµ¬ë¡œ í•„ìš”í•œ ìŠ¤í‚¬ ì „ì²´ ë‚´ìš© ë¡œë“œ

3. Execution Phase
   â””â”€ LLMì´ ìŠ¤í‚¬ ì§€ì¹¨ì— ë”°ë¼ 10ê°œ ì˜ë£Œ ë„êµ¬ ì‹¤í–‰
      â”œâ”€ analyze_symptoms (ì¦ìƒ ë¶„ì„)
      â”œâ”€ analyze_xray/mri/ct (ì˜ìƒ ë¶„ì„)
      â”œâ”€ assess_severity (ì‹¬ê°ë„ í‰ê°€)
      â””â”€ recommend_treatment (ì¹˜ë£Œ ì¶”ì²œ)
```

---

## ê¸°ìˆ  ìŠ¤íƒ

### Backend
- **Framework**: FastAPI 0.100+
- **LLM**: OpenAI GPT-4o (Function Calling + Vision)
- **Streaming**: Server-Sent Events (SSE)
- **Data**: Mock Data Source (í”„ë¡œí† íƒ€ì…ìš©)

### Frontend
- **UI**: Vanilla JavaScript + HTML5
- **Styling**: Pure CSS (Gradient Design)
- **Communication**: Fetch API + EventSource (SSE)

### Infrastructure
- **Containerization**: Docker + Docker Compose
- **Testing**: pytest + coverage
- **Logging**: Python logging module

---

## ë¹ ë¥¸ ì‹œì‘

### ì‚¬ì „ ìš”êµ¬ì‚¬í•­
- Python 3.10 ì´ìƒ
- OpenAI API Key
- (ì„ íƒ) Docker & Docker Compose

### ë¡œì»¬ ì‹¤í–‰

```bash
# 1. ì €ì¥ì†Œ í´ë¡ 
git clone https://github.com/yourusername/doctor-agent.git
cd doctor-agent

# 2. OpenAI API í‚¤ ì„¤ì •
export OPENAI_API_KEY="your-api-key-here"

# 3. ì „ì²´ ì‹œìŠ¤í…œ ì‹¤í–‰ (ê°€ìƒí™˜ê²½ ìë™ ìƒì„± + ì„œë²„ ì‹¤í–‰)
python run.py
```

ë¸Œë¼ìš°ì €ì—ì„œ ìë™ìœ¼ë¡œ `http://localhost:3000` ì—´ë¦¼

### Docker ì‹¤í–‰

```bash
# Docker Composeë¡œ ì‹¤í–‰
docker-compose up -d

# ì ‘ì†
open http://localhost:3000
```

---

## í”„ë¡œì íŠ¸ êµ¬ì¡°

```
doctor-agent/
â”œâ”€â”€ backend/                 # FastAPI ë°±ì—”ë“œ
â”‚   â”œâ”€â”€ main.py             # API ì„œë²„ (SSE ìŠ¤íŠ¸ë¦¬ë°)
â”‚   â”œâ”€â”€ config.py           # ì„¤ì • ê´€ë¦¬
â”‚   â”œâ”€â”€ skill_loader.py     # Agent Skills ë¡œë”
â”‚   â””â”€â”€ tools/
â”‚       â”œâ”€â”€ definitions.py  # OpenAI Function ì •ì˜
â”‚       â””â”€â”€ registry.py     # ë„êµ¬ ì‹¤í–‰ ì—”ì§„
â”œâ”€â”€ frontend/               # í”„ë¡ íŠ¸ì—”ë“œ
â”‚   â””â”€â”€ index.html          # ì±„íŒ… UI (Vanilla JS)
â”œâ”€â”€ skills/                 # Agent Skills (4ê°œ)
â”‚   â”œâ”€â”€ symptom-analysis/
â”‚   â”œâ”€â”€ imaging-analysis/
â”‚   â”œâ”€â”€ disease-assessment/
â”‚   â””â”€â”€ treatment-recommendation/
â”œâ”€â”€ data/                   # ëª©ì—… ë°ì´í„°
â”‚   â””â”€â”€ mock_data.py
â”œâ”€â”€ tests/                  # í…ŒìŠ¤íŠ¸ ì½”ë“œ
â”‚   â”œâ”€â”€ test_api.py
â”‚   â”œâ”€â”€ test_skills.py
â”‚   â””â”€â”€ test_tools.py
â”œâ”€â”€ prompts/                # ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸
â”‚   â””â”€â”€ system.md
â”œâ”€â”€ run.py                  # ì›í´ë¦­ ì‹¤í–‰ ìŠ¤í¬ë¦½íŠ¸
â”œâ”€â”€ Dockerfile
â”œâ”€â”€ docker-compose.yml
â””â”€â”€ README.md
```

---

## ì£¼ìš” ê¸°ëŠ¥

### 1. ì¦ìƒ ë¶„ì„
- í†µì¦ ìœ„ì¹˜, ê°•ë„(1-10), ì§€ì†ê¸°ê°„ íŒŒì•…
- í†µì¦ ìœ í˜• ë¶„ë¥˜ (ë‘”í†µ/ì°Œë¥´ëŠ”/ë°©ì‚¬í†µ/ë°•ë™ì„±/í™”ëˆê±°ë¦¼)
- Red Flags ê°ì§€ (ì‘ê¸‰ ìƒí™©)

### 2. ì˜ìƒ ë¶„ì„
- **X-ray**: ê³¨ì ˆ, ë””ìŠ¤í¬ ê°„ê²©, ê´€ì ˆì—¼
- **MRI**: ë””ìŠ¤í¬ íƒˆì¶œ, ì¸ëŒ€ ì†ìƒ, ì‹ ê²½ ì••ë°•
- **CT**: ë‡Œì¶œí˜ˆ, ë³µë¶€ ì¥ê¸°, íìƒ‰ì „

### 3. ì§ˆë³‘ í‰ê°€
- ì‹¬ê°ë„ ë¶„ë¥˜: ê²½ì¦ / ì¤‘ë“±ì¦ / ì¤‘ì¦
- ê¸´ê¸‰ë„ íŒë‹¨: ì‘ê¸‰ / ì¤€ì‘ê¸‰ / ë¹„ì‘ê¸‰
- ìœ„í—˜ ìš”ì†Œ ì²´í¬ (ë‚˜ì´, ê¸°ì €ì§ˆí™˜)

### 4. ì¹˜ë£Œ ì¶”ì²œ
- ì•½ë¬¼ ì¹˜ë£Œ ì˜µì…˜ (ì„±ë¶„, ìš©ë²•, ì£¼ì˜ì‚¬í•­)
- ìˆ˜ìˆ  ì¹˜ë£Œ ì˜µì…˜ (ë°©ë²•, ì¥ë‹¨ì , íšŒë³µê¸°ê°„)
- ìƒí™œìŠµê´€ ê¶Œê³ 

---

## API ì—”ë“œí¬ì¸íŠ¸

### `POST /api/chat`
ì±„íŒ… ë©”ì‹œì§€ ì „ì†¡ (SSE ìŠ¤íŠ¸ë¦¬ë° ì‘ë‹µ)

**Request:**
```json
{
  "message": "í—ˆë¦¬ê°€ ì•„í”„ê³  ë‹¤ë¦¬ê°€ ì €ë ¤ìš”",
  "patient_id": "P001",
  "image": "data:image/jpeg;base64,..." // ì„ íƒì‚¬í•­
}
```

**Response:** (SSE Stream)
```json
{"type": "log", "data": {"step": "discovery", "message": "..."}}
{"type": "log", "data": {"step": "activation", "message": "..."}}
{"type": "log", "data": {"step": "tool_call", "message": "..."}}
{"type": "response", "data": {"content": "ì§„ë‹¨ ê²°ê³¼..."}}
```

### `GET /api/skills`
ì‚¬ìš© ê°€ëŠ¥í•œ ìŠ¤í‚¬ ëª©ë¡ ì¡°íšŒ

### `GET /api/health`
í—¬ìŠ¤ì²´í¬

---

## í…ŒìŠ¤íŠ¸

```bash
# í…ŒìŠ¤íŠ¸ ì‹¤í–‰
pytest

# ì»¤ë²„ë¦¬ì§€ í¬í•¨
pytest --cov=backend --cov-report=html

# íŠ¹ì • í…ŒìŠ¤íŠ¸ë§Œ ì‹¤í–‰
pytest tests/test_api.py -v
```

---

## í™˜ê²½ ë³€ìˆ˜

```bash
# í•„ìˆ˜
OPENAI_API_KEY=your-api-key-here

# ì„ íƒ (ê¸°ë³¸ê°’ ìˆìŒ)
OPENAI_MODEL=gpt-4o          # ì‚¬ìš©í•  ëª¨ë¸
HOST=0.0.0.0                  # ì„œë²„ í˜¸ìŠ¤íŠ¸
PORT=8000                     # ì„œë²„ í¬íŠ¸
```

---

## ê°œë°œ ë¡œë“œë§µ

- [x] Agent Skills ìŠ¤í™ êµ¬í˜„
- [x] ë©€í‹°ëª¨ë‹¬ ì§€ì› (í…ìŠ¤íŠ¸ + ì´ë¯¸ì§€)
- [x] SSE ìŠ¤íŠ¸ë¦¬ë°
- [x] Docker ì»¨í…Œì´ë„ˆí™”
- [x] í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±
- [ ] PostgreSQL ì—°ë™ (ëŒ€í™” íˆìŠ¤í† ë¦¬)
- [ ] ì‚¬ìš©ì ì¸ì¦ (JWT)
- [ ] ì‹¤ì œ ì˜ë£Œ ë°ì´í„° API ì—°ë™
- [ ] RAG ê¸°ë°˜ ì˜í•™ ì§€ì‹ë² ì´ìŠ¤

---

## ë¼ì´ì„ ìŠ¤

Apache License 2.0

---

## ì£¼ì˜ì‚¬í•­

âš ï¸ **ë³¸ ì‹œìŠ¤í…œì€ êµìœ¡ ë° ì—°êµ¬ ëª©ì ì˜ í”„ë¡œí† íƒ€ì…ì…ë‹ˆë‹¤.**

- ì‹¤ì œ ì˜ë£Œ ì§„ë‹¨ì„ ëŒ€ì²´í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤
- ì‘ê¸‰ ìƒí™© ì‹œ ì¦‰ì‹œ 119 ë˜ëŠ” ê°€ê¹Œìš´ ì‘ê¸‰ì‹¤ë¡œ ê°€ì„¸ìš”
- ëª¨ë“  ì˜ë£Œ ê²°ì •ì€ ë°˜ë“œì‹œ ì „ë¬¸ ì˜ë£Œì§„ê³¼ ìƒë‹´ í›„ ê²°ì •í•˜ì„¸ìš”
- ëª©ì—… ë°ì´í„°ë¥¼ ì‚¬ìš©í•˜ë¯€ë¡œ ì‹¤ì œ í™˜ì ë°ì´í„°ì™€ ë‹¤ë¦…ë‹ˆë‹¤

---

## ê¸°ì—¬

ê¸°ì—¬ëŠ” ì–¸ì œë‚˜ í™˜ì˜í•©ë‹ˆë‹¤! ì´ìŠˆë‚˜ PRì„ ììœ ë¡­ê²Œ ì œì¶œí•´ì£¼ì„¸ìš”.

---

## ë¬¸ì˜

í”„ë¡œì íŠ¸ ê´€ë ¨ ë¬¸ì˜: [your.email@example.com](mailto:your.email@example.com)
